# üöÄ Price Collector Bot - User Guide

## ‚ú® ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤

### 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á Price Collector Bot
- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **Symbol** (‡πÄ‡∏ä‡πà‡∏ô btcusdc, ethusdc)
- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **Socket Type**:
  - **Spot** - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ï‡∏•‡∏≤‡∏î Spot ‡∏Ç‡∏≠‡∏á Binance
  - **Future** - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ï‡∏•‡∏≤‡∏î Futures
  - **Demo** - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Testnet (‡∏ó‡∏î‡∏™‡∏≠‡∏ö)

### 2. Dashboard ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Crypto Trades
- **Total Records** - ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô trades ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- **Runtime** - ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ö‡∏≠‡∏ó‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (‡∏ô‡∏≤‡∏ó‡∏µ)
- **Average Price** - ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢
- **Price Range** - ‡∏ä‡πà‡∏ß‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î-‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î)
- **Trade Distribution** - ‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô BUY/SELL
- **Recent Trades** - ‡πÅ‡∏™‡∏î‡∏á 10 trades ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î

### 3. Live Logs
- ‡∏î‡∏π logs ‡πÅ‡∏ö‡∏ö real-time
- Auto-scroll toggle
- **Download Logs** - ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î logs ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå .txt

---

## üìñ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏™‡∏£‡πâ‡∏≤‡∏á Price Collector Bot

1. Login ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö (admin/admin123)
2. ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ Dashboard ‡∏Ñ‡∏•‡∏¥‡∏Å **"+ Create Price Collector"**
3. ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:
   ```
   Bot Name: BTC Spot Collector
   Symbol: btcusdc
   Socket Type: Spot Trading
   ```
4. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Create Bot"**

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

1. ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Dashboard
2. ‡∏Ñ‡∏•‡∏¥‡∏Å **"‚ñ∂ Start"** ‡∏ó‡∏µ‡πà bot ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á
3. ‡∏£‡∏≠‡∏™‡∏±‡∏Å 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô **Running** üü¢

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

1. ‡∏Ñ‡∏•‡∏¥‡∏Å **"View Details"**
2. ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô Dashboard ‡πÅ‡∏™‡∏î‡∏á:
   - ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô records
   - Runtime (‡∏ô‡∏≤‡∏ó‡∏µ)
   - ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢
   - ‡∏Å‡∏£‡∏≤‡∏ü BUY/SELL distribution
   - ‡∏ï‡∏≤‡∏£‡∏≤‡∏á Recent Trades

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: ‡∏î‡∏π Live Logs

1. ‡πÉ‡∏ô Detail Page ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÅ‡∏ó‡πá‡∏ö **"üìÑ Logs"**
2. ‡∏î‡∏π logs ‡πÅ‡∏ö‡∏ö real-time
3. ‡∏Ñ‡∏•‡∏¥‡∏Å **"üì• Download Logs"** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå .txt

---

## üéØ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• BTC Spot
```
Bot Name: BTC Spot Collector
Symbol: btcusdc
Socket Type: spot
```

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ETH Futures
```
Bot Name: ETH Future Collector
Symbol: ethusdc
Socket Type: future
```

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 3: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Demo
```
Bot Name: Test Collector
Symbol: btcusdc
Socket Type: demo
```

---

## üìä ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô Database

### ‡∏ï‡∏≤‡∏£‡∏≤‡∏á `crypto_trades`

| Column | Type | Description |
|--------|------|-------------|
| id | INTEGER | Primary key |
| bot_id | INTEGER | Bot ID |
| symbol | TEXT | Trading pair (e.g., BTCUSDC) |
| timestamp_ms | INTEGER | Unix timestamp (ms) |
| readable_time | TEXT | Human-readable time |
| price | REAL | Trade price |
| quantity | REAL | Trade quantity |
| side | TEXT | BUY or SELL |
| is_maker | INTEGER | Maker flag (0 or 1) |
| created_at | TEXT | Record creation time |

---

## üîß Technical Details

### Python Script
```bash
bots/collect_price.py
```

### Arguments
```bash
--bot-id <bot_id>        # Bot ID from database
--symbol <symbol>        # Trading symbol (e.g., btcusdc)
--socket-type <type>     # spot, future, or demo
```

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Command
```bash
python3 bots/collect_price.py \
  --bot-id 4 \
  --symbol btcusdc \
  --socket-type spot
```

### Socket Endpoints

**Spot Trading:**
```
wss://stream.binance.com:9443/ws/{symbol}@aggTrade
```

**Futures Trading:**
```
wss://fstream.binance.com/ws/{symbol}@aggTrade
```

**Demo/Testnet:**
```
wss://demo-dstream.binance.com/ws/{symbol}@aggTrade
```

---

## üìÅ ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà

### Backend (4 files)
1. `server/routes/trades.js` - Trades API endpoints
2. `server/config/database.js` - Updated (added crypto_trades table)
3. `bots/collect_price.py` - Price collector script
4. `requirements.txt` - Python dependencies

### Frontend (4 files)
1. `client/src/components/CreatePriceCollectorBot.jsx` - Create bot form
2. `client/src/components/CreatePriceCollectorBot.css` - Styles
3. `client/src/components/PriceCollectorDetail.jsx` - Dashboard & logs
4. `client/src/components/PriceCollectorDetail.css` - Styles

### Updated Files
- `server/server.js` - Added trades routes
- `server/routes/bots.js` - Added create/update/delete endpoints
- `server/services/botManager.js` - Support {{BOT_ID}} placeholder
- `client/src/services/api.js` - Added tradesAPI
- `client/src/App.jsx` - Added new routes
- `client/src/components/BotDashboard.jsx` - Added create button

---

## üéÆ API Endpoints

### Trades API

**Get trades:**
```
GET /api/trades/:botId?page=1&limit=50
```

**Get statistics:**
```
GET /api/trades/:botId/stats
```

**Get recent trades:**
```
GET /api/trades/:botId/recent?limit=10
```

**Clear trades:**
```
DELETE /api/trades/:botId
```

### Bots API (New)

**Create bot:**
```
POST /api/bots
Body: {
  name: "BTC Collector",
  description: "...",
  bot_type: "price_collector",
  config: {
    symbol: "btcusdc",
    socket_type: "spot"
  }
}
```

**Update bot:**
```
PUT /api/bots/:id
Body: {
  name: "...",
  config: { ... }
}
```

**Delete bot:**
```
DELETE /api/bots/:id
```

---

## üêõ Troubleshooting

### Bot ‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

**‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:**
1. Python websocket-client ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡πâ‡∏ß
   ```bash
   pip3 install websocket-client
   ```

2. Database ‡∏°‡∏µ table crypto_trades
   ```bash
   cd server
   npm run seed
   ```

3. ‡∏î‡∏π logs
   ```bash
   tail -f server/logs/<bot-name>.log
   ```

### ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô Dashboard

**‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:**
1. Bot status = Running
2. Logs ‡∏°‡∏µ messages
3. Database ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:
   ```bash
   sqlite3 server/data/bot_manager.db "SELECT COUNT(*) FROM crypto_trades WHERE bot_id=X;"
   ```

### WebSocket Error

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:**
- Internet connection ‡∏Ç‡∏≤‡∏î
- Binance API down
- Symbol ‡∏ú‡∏¥‡∏î (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏•‡πá‡∏Å ‡πÄ‡∏ä‡πà‡∏ô btcusdc)

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
- Bot ‡∏à‡∏∞ auto-reconnect ‡∏ó‡∏∏‡∏Å 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö symbol ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- ‡∏•‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô demo socket

---

## üí° Tips & Best Practices

### 1. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Socket Type
- **Spot** - ‡πÉ‡∏ä‡πâ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡∏ï‡∏•‡∏≤‡∏î spot
- **Future** - ‡πÉ‡∏ä‡πâ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ï‡∏•‡∏≤‡∏î futures (leverage)
- **Demo** - ‡πÉ‡∏ä‡πâ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô (testnet)

### 2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Symbol
- ‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: `btcusdc` ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà `BTCUSDC`
- Symbol ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô Binance
- Popular: btcusdc, ethusdc, bnbusdc

### 3. ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô SQLite database
- ‡πÉ‡∏ä‡πâ API `/api/trades/:botId` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ clear ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡∏ï‡∏≠‡∏ô‡∏´‡∏¢‡∏∏‡∏î bot

### 4. Performance
- Auto-refresh ‡∏ó‡∏∏‡∏Å 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- ‡πÄ‡∏Å‡πá‡∏ö logs ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î 200 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô memory
- Database ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÅ‡∏ö‡∏ö real-time

---

## üìà Use Cases

### 1. ‡∏ó‡∏≥ ML/AI Training
- ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤ real-time
- ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô CSV ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö training
- ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå pattern

### 2. Price Monitoring
- ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤ real-time
- ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥
- ‡∏™‡∏£‡πâ‡∏≤‡∏á price alerts

### 3. Market Analysis
- ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå BUY/SELL ratio
- ‡∏î‡∏π trading volume
- ‡∏´‡∏≤ support/resistance

### 4. Research & Backtesting
- ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á
- ‡∏ó‡∏î‡∏™‡∏≠‡∏ö trading strategy
- ‡∏ß‡∏±‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û algorithms

---

## üéâ Summary

‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á Price Collector Bot ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡πÜ
‚úÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Symbol ‡πÅ‡∏•‡∏∞ Socket Type
‚úÖ Dashboard ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô
‚úÖ Live Logs + Download logs
‚úÖ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô Database ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ
‚úÖ Auto-reconnect ‡πÄ‡∏°‡∏∑‡πà‡∏≠ connection ‡∏Ç‡∏≤‡∏î

**Ready to collect crypto data! üöÄüìä**
